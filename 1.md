由于hmall中的搜索用mysql使用的是模糊搜索，效率较低

1. elasticsearch主要是解决模糊搜索的问题，可以大大的提高搜索的性能

1. 相对于mysql，elasticsearch能解决海量搜索的业务。比如在github中的海量的代码中搜索到某个字段

![](images/WEBRESOURCEbee3f2c0c5494e25a26e1d4a28c57a57image.png)

还有这种分割字段的搜索，elasticsearch也可以解决

![](images/WEBRESOURCEa37679e229ed4f3a8eef8923a1963016image.png)

地理坐标搜索，数据库也无法实现。这些都要靠专业的搜索引擎来实现。

elasticsearch搜索引擎

![](images/WEBRESOURCEd0836009f0144a008f3d3fd21d104819image.png)

![](images/WEBRESOURCEf7fbef1a493e41f2a340de82989dcf13image.png)

![](images/WEBRESOURCE875968df8b2b44859f25f6b11960bb73image.png)

elasticsearch是基于lucene来实现的

![](images/WEBRESOURCEeac1b73e11d44f51b9a368776a9a2b99image.png)

早期solar还是用的比较多的

![](images/WEBRESOURCE36d23e841d9041a6be6077d5309ca4e4image.png)

elasticsearch 8.9的api有非常大的不同，跟以前完全不同。

选择的版本是7.12.1

![](images/WEBRESOURCEb344f11b4d69410897f30f3a8498f959image.png)

要求elastic都需要会写

倒排索引

![](images/WEBRESOURCE8552b20ed6f341278afe3c27e7148b4fimage.png)

正向索引是根据id查的时候（id有索引），效率非常高。而进行模糊搜索的时候，需要逐条的查，因此效率非常的低。

![](images/WEBRESOURCEea50afc8c71e4d8faf211818b4439a7bimage.png)

往倒排索引中插入数据的时候，要做两件事，一是在正向索引中创建文档，然后根据分词在倒排索引中添加词条。

由于倒排词条中的文档是使用的类似hash的搜索模式，所有相对于数据库完全正向索引的模糊搜索，效率非常的高

![](images/WEBRESOURCEd4bc7164d8c24191bb88030e28b3b2b5image.png)

ik分词器